<div>
    <div ng-include src="'dist/html/inc/breadcrumb.html'"></div>

    <div>
        <h1 class="page-title" ng-if="action=='create'">{{'CREATE_UPDATE.CREATE' | translate:{modelName:schema.title}
            }}</h1>

        <h1 class="page-title" ng-if="action=='update'">{{'CREATE_UPDATE.UPDATE' | translate:{modelName:schema.title}
            }}</h1>
        <flash-message></flash-message>
        <div id="error" ng-show="validation" class="alert alert-danger" role="alert"><strong>{{'CREATE_UPDATE.VALIDATION.TITLE'
            | translate}}</strong>
            <ul ng-repeat="(type, errors) in validationErrors">
                <li ng-repeat="f in errors">{{'CREATE_UPDATE.VALIDATION.MSG' | translate}}
                    {{f.$name}} 
                </li>
            </ul>
        </div>
        <!--<form name="ngForm" sf-schema="schema" sf-form="form" sf-model="model"-->
        <!--ng-submit="submitForm(ngForm,model)"></form>-->
        <form name="ngForm" ng-submit="submitForm(ngForm,model, false)">
            <div class="form-group row" ng-show="buttonsPosition=='top' || buttonsPosition=='both'">
                <div class="col-lg-12">
                    <div class="pull-right">
                        <input ng-if="m.config.post || m.config.put" type="submit" class="btn btn-success"
                               scroll-to-item
                               scroll-to="body"
                               value="{{'CREATE_UPDATE.SUBMIT'| translate}}">
                        <button ng-if="m.config.put" type="button" class="btn btn-info" scroll-to-item scroll-to="body"
                                ng-click="submitForm(ngForm, model, true)">
                            {{'CREATE_UPDATE.APPLY'| translate}}
                        </button>
                        <button type="button" class="btn btn-danger" ng-click="schemaHREF()">
                            {{'CREATE_UPDATE.CANCEL'| translate}}
                        </button>
                    </div>
                </div>
            </div>
            <div sf-schema="schema" sf-form="form" sf-model="model"></div>
            <div class="form-group row" ng-show="buttonsPosition=='bottom' || buttonsPosition=='both'">
                <div class="col-lg-12">
                    <div class="pull-right">
                        <input ng-if="m.config.post || m.config.put" type="submit" class="btn btn-success"
                               scroll-to-item
                               scroll-to="body"
                               value="{{'CREATE_UPDATE.SUBMIT'| translate}}">
                        <button ng-if="m.config.put" type="button" class="btn btn-info" scroll-to-item scroll-to="body"
                                ng-click="submitForm(ngForm, model, true)">
                            {{'CREATE_UPDATE.APPLY'| translate}}
                        </button>
                        <button type="button" class="btn btn-danger" ng-click="schemaHREF()">
                            {{'CREATE_UPDATE.CANCEL'| translate}}
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<!--MODAL FOR VALIDATION-->
<script type="text/ng-template" id="changedDocument.html">
    <div class="modal-header">
        <h3 class="modal-title">{{'CREATE_UPDATE.MODAL.TITLE' | translate}}</h3>
    </div>
    <div class="modal-body">
        <p>{{'CREATE_UPDATE.MODAL.BODY' | translate}}</p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-default" ng-click="cancel()">{{'CREATE_UPDATE.MODAL.CANCEL' | translate}}</button>
        <button class="btn btn-primary" ng-click="ok()">{{'CREATE_UPDATE.MODAL.SAVE' | translate}}</button>
    </div>
</script>
